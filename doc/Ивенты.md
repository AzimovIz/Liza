## Типы Ивентов
### Команда пользователя 
Такой ивент обрабатывается только в NLU. Список команд для анализа в NLU формируется из интентов предоставленных модулями.
При анализе с помощью NLU Ивен выбирается на основе примеров предоставленых модулями. После выбора интента вызывается связанная функция модуля в которую передается этот ивент.

### Простой текст
Этот тип ивентов не обрабатывается в NLU вместо этого такие ивенты могут быть маршрутизированы ядром, например модуль календаря отправляет такой ивент когда наступает время для напоминания о событии - его не надо обрабатывать как команду, вместо этого его можно например переправить в телеграмм.

## Взаимодействие
Взаимодействие с ядром происходит через очередь ивентов. Для взаимодействия с ними есть два варианта:
- Входная очередь - используется для обработки ивентов которые приходят из других модулей
- Выходная очередь - используется для того чтобы доставить ивенты из модуля в ядро
### Выходная очередь
Для того чтобы использовать очередь нужно добавить переменную *senders* в *main.py* файл модуля. Переменная содержит список объектов для создания корутины и передачи в неё очереди.
**main.py**
```python
# imports and other settings
from .my_module_files import my_function # import intent function

senders = [  
    {        
	    "name": "my_function_send",  
        "function": my_function  
    }  
]  

```
- name - название, хорошо будет если оно будет состоять из <название функции>\_send.
- function - ссылка на **асинхронную** функцию, функция должна быть импортирована и передана ссылка на нее - т.е. надо написать функцию без скобок.

Функция будет вызвана один раз при инициализации ядра, она должна содержать асинхронный бесконечный цикл и по мере готовности данных добавлять его к очереди.

```python
from event import EventTypes, Event # import event classes


async def my_function(queue: asyncio.Queue = None, **kwargs):  
    while True:  
        await asyncio.sleep(0)  
        data = "123" # get data from servises/microphone/http requests...
		await queue.put(
			Event(  
				event_type=EventTypes.text,
				value=data
			)  
		)
```
В данный момент доступно два типа ивентов:
- text - это ивент значением которого является строка. Такой ивент не обрабатывается как команда пользователя, однако он может быть перенаправлен через [конфигурацию подключения ивентов]([[Перенаправление ивентов]]) модулей.
- user_command - этот тип ивентов предназначен для модулей интерфейсов, такие события обрабатываются как команды пользователя

### Входная очередь
Работает по тому же принципу, только для настройки используется переменная *acceptors* в *main.py* файле модуля. Так-же логика работы меняется на постоянное прослушивание очереди для получения входного ивента и дальнейшей обработки данных из него.